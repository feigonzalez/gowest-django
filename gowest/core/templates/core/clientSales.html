{% extends 'core/templates/clientViewTemplate.html' %}
{% block 'clientContent' %}
<form class="mt-3 mb-3" action="{% url 'searchClientSales' %}" method="GET">
{% csrf_token %}
    <div class="input-group">
		<input class="searchbar form-control" name="searchClientSalesQuery" id="searchPurchases" placeholder="Buscar en Compras"></input>
      	<div class="input-group-append">
        	<button class="btn btn-gowest"><span class="icon fa fa-search"></span></button>
      	</div>
    </div>
</form>
<div class="table-responsive">
	<table class="table table-hover align-middle">
		<thead>
			<tr>
			<th>CÃ³digo</th>
			<th>Fecha Venta</th>
			<th class="d-none d-sm-table-cell">Fecha Entrega</th>
			<th>Estado</th>
			<th></th>
			</tr>
		</thead>
		<tbody id="tableSalesBody">
			{% for sale in sales %}
				<tr>
				<td data-type="string">{{ sale.id }}</td>
				<td data-type="date">{{ sale.saleDate }}</td>
				<td class="d-none d-sm-table-cell" data-type="date">{{ sale.deliveryDate }}</td>
				<td data-type="string">{{ sale.status }}</td>
				<td class="text-right">
				{% if sale.status == "Despachada" %}
					<button class="btn btn-primary" data-toggle="modal" data-target="#saleAlertModal" onclick="confirmSaleReception(this)" data-id="{{ sale.id }}">
						<span class="icon fa fa-shopping-bag"></span></button>
				{% endif %}
				{% if sale.status == "Carrito" %}
					<a class="btn btn-secondary" href="{% url 'cart' %}">
						<span class="icon fa fa-shopping-cart"></span></a>
				{% endif %}
				<button class="btn btn-success" data-toggle="modal" data-target="#saleDataModal" onclick="prepareSaleModal(this)" data-id="{{ sale.id }}">
					<span class="icon fa fa-search"></span></button>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% include 'core/modals/saleDataModal.html' %}
{% include 'core/modals/saleAlertModal.html' %}
{% endblock 'clientContent' %}